{% extends "base.html" %}

{% block title %}
	{{ request.title }} - {{ package.title }}
{% endblock %}

{% block content %}
	<h1>{{ request.title }} by {{ request.author.display_name }}</h1>
	<p>
		Package: <a href="{{ package.getDetailsURL() }}">{{ package.title }}</a>
	</p>
	<p>
		{% if request.desc %}
			{{ request.desc }}
		{% else %}
			<i>No description given</i>
		{% endif %}
	</p>
	{% if request.status == 1 %}
		<div class="box box_grey alert alert-success">
			This edit request was merged.
		</div>
	{% elif request.status == 2 %}
		<div class="box  box_grey alert alert-error">
			This edit request was rejected.
		</div>
	{% elif package.checkPerm(current_user, "APPROVE_CHANGES") %}
		<div class="box box_grey">
			To resolve this request, either
			<a href="{{ request.getApproveURL() }}">Approve and Apply</a> or
			<a href="{{ request.getRejectURL() }}">Reject</a> it.
		</div>
	{% endif %}

	<table>
		<tr>
			<th>Property</th>
			<th>Old</th>
			<th>New</th>
		</tr>

		{% for change in request.changes %}
			<tr>
				<td>{{ change.key.value }}</td>
				<td>{{ change.oldValue }}</td>
				<td>{{ change.newValue }}</td>
			</tr>
		{% endfor %}
{% endblock %}
