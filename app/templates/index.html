{% extends "base.html" %}

{% block title %}
Dashboard
{% endblock %}

{% block container %}
<header>
	<div class="container">
		<h1>Content DB</h1>

		<p>
			Minetest's official content repository.
			Browse {{ packages | length }} packages,
			all available under a free and open source
			license.
		</p>

		<form method="get" action="/packages/">
			<input type="text" name="q" value="{{ query or ''}}" />
			<input type="submit" value="Search" />
		</form>
	</div>
</header>

<main>
	<ul class="packagegrid">
		{% for p in packages %}
			<li><a href="{{ p.getDetailsURL() }}"
				style="background-image: url({{ p.getMainScreenshotURL() or '/static/placeholder.png' }});">
				<div class="packagegridscrub"></div>
				<div class="packagegridinfo">
					<h3>{{ p.title }} by {{ p.author.display_name }}</h3>

					<p>
						{{ p.shortDesc }}
					</p>
				</div>
			</a></li>
		{% else %}
			<li><i>No packages available</i></ul>
		{% endfor %}
	</ul>
</main>
{% endblock %}
