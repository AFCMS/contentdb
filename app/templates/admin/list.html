{% extends "base.html" %}

{% block title %}
	Admin Tools
{% endblock %}

{% block content %}
	<div class="row">
		<div class="col-md-6">
			<div class="list-group">
				<a class="list-group-item list-group-item-action" href="{{ url_for('users.list_all') }}">User list</a>
				<a class="list-group-item list-group-item-action" href="{{ url_for('admin.tag_list') }}">Tag Editor</a>
				<a class="list-group-item list-group-item-action" href="{{ url_for('admin.license_list') }}">License Editor</a>
				<a class="list-group-item list-group-item-action" href="{{ url_for('admin.version_list') }}">Version Editor</a>
				<a class="list-group-item list-group-item-action" href="{{ url_for('admin.switch_user') }}">Sign in as another user</a>
			</div>
		</div>

		<div class="col-md-6">
			<div class="card mb-4">
				<h2 class="card-header">Do action</h2>

				<form method="post" action="" class="card-body">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
					<div class="row px-3">
						<select name="action" class="custom-select col">
							<option value="delstuckreleases" selected>Delete stuck releases</option>
							<option value="checkreleases">Validate all Zip releases</option>
							<option value="reimportpackages">Reimport meta</option>
							<option value="importmodlist">Import forum topics</option>
							<option value="recalcscores">Recalculate package scores</option>
							<option value="checkusers">Check forum users</option>
							<option value="importscreenshots">Import screenshots from VCS</option>
							<option value="cleanuploads">Delete unreachable uploads</option>
						</select>
						<input type="submit" value="Perform" class="col-sm-auto btn btn-primary ml-2" />
					</div>
				</form>
			</div>

			<div class="card">
				<h2 class="card-header">Restore Package</h2>

				<form method="post" action="" class="card-body">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
					<input type="hidden" name="action" value="restore" />
					<div class="row px-3">
						<select name="package" class="custom-select col">
							{% for p in deleted_packages %}
								<option value={{ p.id }}>{{ p.id}}) {{ p.title }} by {{ p.author.display_name }}</option>
							{% endfor %}
						</select>
						<input type="submit" value="Restore" class="col-sm-auto btn btn-primary ml-2" />
					</div>
				</form>
			</div>
		</div>
	</div>
{% endblock %}
